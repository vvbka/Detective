/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.13.0 - 2015-05-02
 * License: MIT
 */
angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.typeahead","ui.bootstrap.position","ui.bootstrap.bindHtml"]),angular.module("ui.bootstrap.tpls",["template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(t){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(a){var i=a.match(e);if(!i)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+a+'".');return{itemName:i[3],source:t(i[4]),viewMapper:t(i[2]||i[1]),modelMapper:t(i[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(t,e,a,i,n,o,r){var p=[9,13,27,38,40];return{require:"ngModel",link:function(l,c,d,s){var u,h=l.$eval(d.typeaheadMinLength)||1,f=l.$eval(d.typeaheadWaitMs)||0,m=l.$eval(d.typeaheadEditable)!==!1,v=e(d.typeaheadLoading).assign||angular.noop,y=e(d.typeaheadOnSelect),g=d.typeaheadInputFormatter?e(d.typeaheadInputFormatter):void 0,$=d.typeaheadAppendToBody?l.$eval(d.typeaheadAppendToBody):!1,b=l.$eval(d.typeaheadFocusFirst)!==!1,w=e(d.ngModel).assign,x=r.parse(d.typeahead),M=l.$new();l.$on("$destroy",function(){M.$destroy()});var I="typeahead-"+M.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":I});var H=angular.element("<div typeahead-popup></div>");H.attr({id:I,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(d.typeaheadTemplateUrl)&&H.attr("template-url",d.typeaheadTemplateUrl);var k=function(){M.matches=[],M.activeIdx=-1,c.attr("aria-expanded",!1)},q=function(t){return I+"-option-"+t};M.$watch("activeIdx",function(t){0>t?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",q(t))});var U=function(t){var e={$viewValue:t};v(l,!0),a.when(x.source(l,e)).then(function(a){var i=t===s.$viewValue;if(i&&u)if(a&&a.length>0){M.activeIdx=b?0:-1,M.matches.length=0;for(var n=0;n<a.length;n++)e[x.itemName]=a[n],M.matches.push({id:q(n),label:x.viewMapper(M,e),model:a[n]});M.query=t,M.position=$?o.offset(c):o.position(c),M.position.top=M.position.top+c.prop("offsetHeight"),c.attr("aria-expanded",!0)}else k();i&&v(l,!1)},function(){k(),v(l,!1)})};k(),M.query=void 0;var E,A=function(t){E=i(function(){U(t)},f)},S=function(){E&&i.cancel(E)};s.$parsers.unshift(function(t){return u=!0,t&&t.length>=h?f>0?(S(),A(t)):U(t):(v(l,!1),S(),k()),m?t:t?void s.$setValidity("editable",!1):(s.$setValidity("editable",!0),t)}),s.$formatters.push(function(t){var e,a,i={};return m||s.$setValidity("editable",!0),g?(i.$model=t,g(l,i)):(i[x.itemName]=t,e=x.viewMapper(l,i),i[x.itemName]=void 0,a=x.viewMapper(l,i),e!==a?e:t)}),M.select=function(t){var e,a,n={};n[x.itemName]=a=M.matches[t].model,e=x.modelMapper(l,n),w(l,e),s.$setValidity("editable",!0),s.$setValidity("parse",!0),y(l,{$item:a,$model:e,$label:x.viewMapper(l,n)}),k(),i(function(){c[0].focus()},0,!1)},c.bind("keydown",function(t){0!==M.matches.length&&-1!==p.indexOf(t.which)&&(-1!=M.activeIdx||13!==t.which&&9!==t.which)&&(t.preventDefault(),40===t.which?(M.activeIdx=(M.activeIdx+1)%M.matches.length,M.$digest()):38===t.which?(M.activeIdx=(M.activeIdx>0?M.activeIdx:M.matches.length)-1,M.$digest()):13===t.which||9===t.which?M.$apply(function(){M.select(M.activeIdx)}):27===t.which&&(t.stopPropagation(),k(),M.$digest()))}),c.bind("blur",function(){u=!1});var V=function(t){c[0]!==t.target&&(k(),M.$digest())};n.bind("click",V),l.$on("$destroy",function(){n.unbind("click",V),$&&_.remove(),H.remove()});var _=t(H)(M);$?n.find("body").append(_):c.after(_)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(t,e,a){t.templateUrl=a.templateUrl,t.isOpen=function(){return t.matches.length>0},t.isActive=function(e){return t.active==e},t.selectActive=function(e){t.active=e},t.selectMatch=function(e){t.select({activeIdx:e})}}}}).directive("typeaheadMatch",["$templateRequest","$compile","$parse",function(t,e,a){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(i,n,o){var r=a(o.templateUrl)(i.$parent)||"template/typeahead/typeahead-match.html";t(r).then(function(t){e(t.trim())(i,function(t){n.replaceWith(t)})})}}}]).filter("typeaheadHighlight",function(){function t(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(e,a){return a?(""+e).replace(new RegExp(t(a),"gi"),"<strong>$&</strong>"):e}}),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(t,e){function a(t,a){return t.currentStyle?t.currentStyle[a]:e.getComputedStyle?e.getComputedStyle(t)[a]:t.style[a]}function i(t){return"static"===(a(t,"position")||"static")}var n=function(e){for(var a=t[0],n=e.offsetParent||a;n&&n!==a&&i(n);)n=n.offsetParent;return n||a};return{position:function(e){var a=this.offset(e),i={top:0,left:0},o=n(e[0]);o!=t[0]&&(i=this.offset(angular.element(o)),i.top+=o.clientTop-o.scrollTop,i.left+=o.clientLeft-o.scrollLeft);var r=e[0].getBoundingClientRect();return{width:r.width||e.prop("offsetWidth"),height:r.height||e.prop("offsetHeight"),top:a.top-i.top,left:a.left-i.left}},offset:function(a){var i=a[0].getBoundingClientRect();return{width:i.width||a.prop("offsetWidth"),height:i.height||a.prop("offsetHeight"),top:i.top+(e.pageYOffset||t[0].documentElement.scrollTop),left:i.left+(e.pageXOffset||t[0].documentElement.scrollLeft)}},positionElements:function(t,e,a,i){var n,o,r,p,l=a.split("-"),c=l[0],d=l[1]||"center";n=i?this.offset(t):this.position(t),o=e.prop("offsetWidth"),r=e.prop("offsetHeight");var s={center:function(){return n.left+n.width/2-o/2},left:function(){return n.left},right:function(){return n.left+n.width}},u={center:function(){return n.top+n.height/2-r/2},top:function(){return n.top},bottom:function(){return n.top+n.height}};switch(c){case"right":p={top:u[d](),left:s[c]()};break;case"left":p={top:u[d](),left:n.left-o};break;case"bottom":p={top:u[c](),left:s[d]()};break;default:p={top:n.top-r,left:s[d]()}}return p}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(t,e,a){e.addClass("ng-binding").data("$binding",a.bindHtmlUnsafe),t.$watch(a.bindHtmlUnsafe,function(t){e.html(t||"")})}}),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(t){t.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(t){t.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]);